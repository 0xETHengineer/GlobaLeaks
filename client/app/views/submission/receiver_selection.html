<div id="SubmissionStepReceiver" class="receiverCards">
  <div id="StepTitle" data-ng-if="!show_steps_navigation_bar" data-translate>Recipient selection</div>
  <div id="ReceiverSelectionBox">
    <div class="stepDescription">{{submission.context.recipients_clarification}}</div>
    <div data-ng-repeat="receiver in submission.receivers | filter:filterReceivers | orderBy:receiversOrderPredicate" data-ng-if="receiver.configuration !== 'forcefully_selected'" id="receiver-{{$index}}" data-ng-class="{'col-md-6': !submission.context.show_small_receiver_cards, 'col-md-3': submission.context.show_small_receiver_cards}" data-ng-click="switch_selection(receiver)">
      <div class="receiverCard" data-ng-class="{'selected': submission.receivers_selected[receiver.id] && receiver.configuration !== 'forcefully_selected', 'forcefullySelected': receiver.configuration === 'forcefully_selected', 'disabled': receiver.configuration === 'unselectable' || (!node.allow_unencrypted && receiver.pgp_key_status === 'disabled')}">
        <div class="receiverCardTitle row">
          <div class="col-md-10">
            <label>
              <span data-ng-if="!node.disable_encryption_warnings && receiver.configuration !== 'unselectable'" data-ng-switch="receiver.pgp_key_status">
                <i data-ng-switch-when="enabled" class="glyphicon glyphicon-certificate" uib-popover="{{'This recipient has configured the encryption key.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
                <i data-ng-switch-when="disabled" class="glyphicon glyphicon-warning-sign" uib-popover="{{'This recipient has not configured the encryption key.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
              </span>
              <span data-ng-if="receiver.configuration === 'unselectable'">
                <i class="glyphicon glyphicon-ban-circle" uib-popover="{{'This recipient cannot be selected.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
              </span>
              <span>&nbsp;{{::receiver.name}}</span>
            </label>
          </div>
          <div class="col-md-1" data-ng-if="receiver.pgp_key_status === 'enabled' || node.allow_unencrypted">
            <div data-ng-if="submission.receivers_selected[receiver.id]">
              <div data-ng-if="receiver.configuration === 'default'">
                <i class="glyphicon glyphicon-check" uib-popover="{{'Unselect this recipient.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
              </div>
              <div data-ng-if="receiver.configuration === 'forcefully_selected'">
                <i class="glyphicon glyphicon-check" uib-popover="{{'This recipient cannot be deselected.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
              </div>
            </div>
            <div data-ng-if="!submission.receivers_selected[receiver.id]">
              <div data-ng-if="receiver.configuration === 'default'">
                <i class="glyphicon glyphicon-unchecked" uib-popover="{{'Select this recipient.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
              </div>
              <div data-ng-if="receiver.configuration === 'unselectable'">
                <i class="glyphicon glyphicon-unchecked" uib-popover="{{'This recipient cannot be selected.' | translate}}" popover-placement="right" popover-trigger="mouseenter"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="receiverCardContent row">
          <div class="receiverCardFrame" data-ng-class="{'col-md-3': !submission.context.show_small_receiver_cards, 'col-md-12': submission.context.show_small_receiver_cards}">
            <span class="verticalAlignHelper"></span><img class="receiverImg" data-ng-if="receiver.picture !== ''" data-ng-src="{{::Utils.imgDataUri(receiver.picture)}}" />
          </div>
          <div data-ng-if="!submission.context.show_small_receiver_cards" class="receiverDescription col-md-7">{{::receiver.description}}</div>
        </div>
      </div>
    </div>
  </div>
  <div style="clear:both"><br /><br /></div>
  <div id="ReceiverSelectionBox">
    <div data-ng-if="GLTranslate.indirect.appLanguage === 'de'" class="stepDescription">Ihr Hinweis wird an die Mitglieder des Corporate Compliance Committees übermittelt. Dieses Gremium trägt die Gesamtverantwortung für das Compliance Management der Oetker-Gruppe. Diese Empfänger sind nicht abwählbar:</div>
    <div data-ng-if="GLTranslate.indirect.appLanguage === 'en'" class="stepDescription">The members of the Corporate Compliance Committee will receive your submission. This body is in charge for the compliance management throughout the Oetker-Group. These receivers are not deselectable:</div>
    <div data-ng-repeat="receiver in submission.receivers | orderBy:receiversOrderPredicate" id="receiver-{{$index}}" data-ng-class="{'col-md-6': !submission.context.show_small_receiver_cards, 'col-md-3': submission.context.show_small_receiver_cards}" data-ng-click="switch_selection(receiver)">
      <div class="receiverCard" data-ng-class="{'selected': submission.receivers_selected[receiver.id] && receiver.configuration !== 'forcefully_selected', 'forcefullySelected': receiver.configuration === 'forcefully_selected', 'disabled': receiver.configuration === 'unselectable' || (!node.allow_unencrypted && receiver.pgp_key_public === '')}">
        <div class="receiverCardTitle row">
          <div class="col-md-10">
            <label>
              <span data-ng-if="!node.disable_encryption_warnings && receiver.configuration !== 'unselectable'">
                <i data-ng-if="recipient.pgp_key_public !== ''" class="glyphicon glyphicon-certificate" uib-popover="{{'This recipient has configured the encryption key.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
                <i data-ng-if="recipient.pgp_key_public === ''" class="glyphicon glyphicon-warning-sign" uib-popover="{{'This recipient has not configured the encryption key.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
              </span>
              <span data-ng-if="receiver.configuration === 'unselectable'">
                <i class="glyphicon glyphicon-ban-circle" uib-popover="{{'This recipient cannot be selected.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
              </span>
              <span>&nbsp;{{::receiver.name}}</span>
            </label>
          </div>
          <div class="col-md-1" data-ng-if="receiver.pgp_key_public !== '' || node.allow_unencrypted">
            <div data-ng-if="submission.receivers_selected[receiver.id]">
              <div data-ng-if="receiver.configuration === 'default'">
                <i class="glyphicon glyphicon-check" uib-popover="{{'Unselect this recipient.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
              </div>
              <div data-ng-if="receiver.configuration === 'forcefully_selected'">
                <i class="glyphicon glyphicon-check" uib-popover="{{'This recipient cannot be deselected.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
              </div>
            </div>
            <div data-ng-if="!submission.receivers_selected[receiver.id]">
              <div data-ng-if="receiver.configuration === 'default'">
                <i class="glyphicon glyphicon-unchecked" uib-popover="{{'Select this recipient.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
              </div>
              <div data-ng-if="receiver.configuration === 'unselectable'">
                <i class="glyphicon glyphicon-unchecked" uib-popover="{{'This recipient cannot be selected.' | translate}}" popover-placement="right" popover-trigger="'mouseenter'"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="receiverCardContent row">
          <div class="receiverCardFrame" data-ng-class="{'col-md-3': !submission.context.show_small_receiver_cards, 'col-md-12': submission.context.show_small_receiver_cards}">
            <span class="verticalAlignHelper"></span><img class="receiverImg" alt="recipient picture" data-ng-if="receiver.picture !== ''" data-ng-src="{{::Utils.imgDataUri(receiver.picture)}}" />
          </div>
          <div data-ng-if="!submission.context.show_small_receiver_cards" class="receiverDescription col-md-7">{{::receiver.description}}</div>
        </div>
      </div>
    </div>
  </div>
</div>
