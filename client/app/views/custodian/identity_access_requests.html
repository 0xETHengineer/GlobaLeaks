<div data-ng-controller="CustodianIdentityAccessRequestsCtrl">
  <div class="row">
    <div class="col-md-12">
      <span class="pull-left">
        <span id="tip-action-postpone"
              data-ng-if="preferences.can_postpone_expiration"
              data-ng-click="tip_postpone()"
              popover="{{'Postpone tip expiration date' | translate}}"
              popover-placement="top"
              popover-trigger="mouseenter"
              class="btn btn-default">
          <i class="glyphicon glyphicon-time"></i>
        </span>

        <span id="tip-action-delete"
              data-ng-if="preferences.can_delete_submission"
              data-ng-click="tip_delete()"
              popover="{{'Delete tip' | translate}}"
              popover-placement="top"
              popover-trigger="mouseenter"
              class="btn btn-default">
          <span class="glyphicon glyphicon-trash"></span>
        </span>
      </span>
      <span class="pull-left">
        <div class="form-group">
          <input id="search-filter" type="text" class="form-control" placeholder="{{'Search' | translate}}" ng-model="search">
        </div>
      </span>
      <span class="pull-left">
        <span id="link-reload"
              data-ng-click="reload()"
              popover="{{'Refresh page' | translate}}"
              popover-placement="top"
              popover-trigger="mouseenter"
              class="btn btn-default">
          <span class="glyphicon glyphicon-refresh"></span>
        </span>
      </span>
      <span class="pull-right">
        <a id="receiver-link-preferences"
           href="#/receiver/preferences"
           popover="{{'Preferences' | translate}}"
           popover-placement="top"
           popover-trigger="mouseenter"
           class="btn btn-default">
            <span class="glyphicon glyphicon-cog"></span>
        </a>
      </span>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-md-12">
      <table class="table table-condensed table-striped">
        <thead>
          <tr>
            <th>Request Date</th>
            <th>Submission Date</th>
            <th >User</th>
            <th>Request Motivation</th>
            <th>Authorization</th>
          </tr>
        </thead>
        <tbody>
          <tr id="iar-{{$index}}" data-ng-repeat="iar in iars | filter:search" >
            <td>{{iar.request_date}}</td>
            <td>{{iar.submission_date | date:'dd-MM-yyyy HH:mm'}}</td>
            <td>{{iar.request_user_name | date:'dd-MM-yyyy HH:mm'}}</td>
            <td>{{iar.request_motivation | date:'dd-MM-yyyy HH:mm'}}</td>
            <td>
              <button class="btn btn-xs btn-primary" data-ng-click="authorize_identity_access_request(iar.id)">Authorize</button>&nbsp;
              <button class="btn btn-xs btn-danger" data-ng-click="file_denied_identity_access_reply(iar.id)">Deny</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
