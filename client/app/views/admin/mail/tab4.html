<div class="row">
  <div class="col-md-8">
    <label data-translate>Exception reporting email addresses</label>
    <div data-ng-repeat="email_addr in admin.notification.exception_email_address_list track by $index">
      <span ng-init="item_name = 'email_'+$index"></span>
      <span class="input-group">
        <span class="input-group-addon" data-translate>Email Address</span>
        <input class="form-control" data-ng-model="admin.notification.exception_email_address_list[$index]" name="{{item_name}}" type="text" data-ng-pattern="email_regexp" required/>
        <span class="input-group-btn">
          <button class="btn btn-danger" data-ng-click="admin.notification.exception_email_address_list.splice($index, 1)">
            <i class="glyphicon glyphicon-minus"></i> <span data-translate>Remove</span>
          </button>
        </span>
      </span>
      <p class="text-danger" data-ng-if="notificationForm[item_name].$error.pattern">
        * <span data-translate>Invalid email address</span>
      </p>
      </br>
    </div>
    <button class="btn btn-primary" data-ng-click="admin.notification.exception_email_address_list.push('')">
       <i class="glyphicon glyphicon-plus"></i> <span data-translate>Add</span>
    </button>

    </br>

    <div data-ng-show="admin.notification.exception_email_pgp_key_public !== ''">
      <div class="alert alert-success">
        <span data-translate>Encryption is enabled!</span>
      </div>

      <div pgp-pubkey-display key-str="admin.notification.exception_email_pgp_key_public"></div>

      <div class="form-group" data-ng-show="admin.notification.exception_email_pgp_key_fingerprint">
        <input data-ng-model="admin.notification.exception_email_pgp_key_remove" type="checkbox">
        <label data-translate>Remove the PGP key</label>
      </div>
    </div>
    <div class="form-group" data-ng-hide="admin.notification.exception_email_pgp_key_public !== ''">
      <div class="alert alert-danger">
        <div data-translate>Encryption has not been enabled!</div>
        <div data-translate>Email notifications won't be encrypted.</div>
      </div>
    </div>

    <div class="form-group" data-ng-hide="admin.notification.exception_email_pgp_key_fingerprint">
      <label data-translate>Set a PGP public key for encryption of email notifications</label>
      <textarea data-pgp-pubkey-validator="canBeEmpty" class="form-control"
          data-ng-attr-placeholder="{{'Copy and paste the PGP public key here' | translate}}"
          data-ng-model="admin.notification.exception_email_pgp_key_public">
      </textarea>
    </div>

  </div>
</div>
