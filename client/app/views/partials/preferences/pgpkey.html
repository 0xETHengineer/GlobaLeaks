<div data-ng-form="pgpkeyForm">
  <div data-ng-show="preferences.pgp_key_fingerprint !== ''">
    <label class="form-group">
      <span data-translate>Encryption:</span> <span class="label label-success" data-translate>Enabled</span>
    </label>

    <div class="form-group" pgp-pubkey-display key-str="preferences.pgp_key_public"></div>

    <div class="form-group">
      <input data-ng-model="preferences.pgp_key_remove" type="checkbox">
      <label data-translate>Remove the PGP key</label>
    </div>
  </div>

  <div class="form-group" data-ng-hide="preferences.pgp_key_fingerprint !== ''" data-ng-class="{'has-error': !pgpkeyForm.$valid}">
    <label>
      <span data-translate>Encryption:</span> <span class="label label-danger" data-translate>Disabled</span>
    </label>

    <div class="position-relative">
      <label data-translate>Set up encryption by providing a PGP public key</label>
      <textarea data-pgp-pubkey-validator="canBeEmpty" class="form-control" data-ng-attr-placeholder="{{'Copy and paste the PGP public key here' | translate}}" data-ng-model="preferences.pgp_key_public"></textarea>
      <label file-picker-input="loadPublicKeyFile(file)" data-label-text="Select" class="btn btn-default textarea-btn"></label>
    </div>
  </div>

  <div class="form-group">
    <button type="submit" class="btn btn-success" data-ng-click="save()" data-ng-disabled="pgpkeyForm.$invalid">
      <i class="glyphicon glyphicon-ok"></i>
      <span data-translate>Update notification and encryption settings</span>
    </button>
  </div>
</div>
