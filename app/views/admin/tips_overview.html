<!-- 

This comment is needed in order to push the following strings on transifex

{{ "Tips Overview" | translate }}
{{ "Administration Interface" | translate }}

-->
<div ng-include="'views/header.html'"
     onload="header_title='Tips Overview';
             header_subtitle='Administration Interface'">
</div>

<div class="container config-page" ng-controller="OverviewCtrl">
  <div class="row">
    <div class="col-md-3 config-sidebar" ng-include="'views/admin/sidebar.html'"></div>
    <div class="col-md-9">

      <p>
      {{ "This interface may help you understand how the Node is used by the whistleblower. We present you with the submissions currently on the node and a few statistics on the kind of usage (activity, files, comments)." | translate }}
      </p>
      <div class="table-responsive">
        <table class="table table-striped table-bordered" id="tipList">
          <thead>
            <tr>
              <th>{{ "Status" | translate }}</th>
              <th>{{ "Creation Date" | translate }}</th>
              <th>{{ "Expiration Date" | translate }}</th>
              <th>{{ "WB Last Access" | translate }}</th>
              <th>{{ "Files" | translate }} </th>
              <th>{{ "Receiver Tips" | translate }}</th>
              <th>{{ "Context" | translate }}</th>
              <th>{{ "Comments" | translate }}</th>
            </tr>
          </thead>

          <tbody id="tipListBody">
            <tr ng-repeat="tip in tips">
              <td>{{tip.status}}</td>
              <td>{{tip.creation_date | date:'yyyy-MM-dd HH:mm'}}</td>
              <td>{{tip.expiration_date | date:'yyyy-MM-dd HH:mm' }}</td>
              <td>{{tip.wb_last_access | date:'yyyy-MM-dd HH:mm' }} ({{tip.wb_access_counter}})</td>
              <td>
                <ul>
                  <li ng-repeat="ifile in tip.internalfiles">
                    {{ifile.name}} ({{ifile.size}}) {{ifile.content_type}}
                   </li>
                </ul>
              </td>
              <td>
                <ul>
                  <li ng-repeat="rtip in tip.receivertips">
                    {{rtip.status}} ({{rtip.access_counter}})
                    <a href="/#/admin/receivers">{{rtip.receiver_name}}</a>
                    {{rtip.receiver_username}}
                  </li>
                </ul>
              </td>

              <td><a href="/#/admin/contexts">{{tip.context_name}}</a></td>
              <td>
                <ul>
                  <li ng-repeat="comment in tip.comments">
                    {{comment.type}} ({{comment.lifetime | date:'yyyy-MM-dd HH:mm' }})
                  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
