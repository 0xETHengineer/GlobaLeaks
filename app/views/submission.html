<div class="jumbotron subhead">
  <div class="container">
    <h1>New Submission</h1>
    <p>I want to report on
    <select
      ng-model="localization.current_context"
      ng-options="context.get_context_name() for context in localization.node_info.contexts"
      ng-change="create_submission()"
    >
  </select>
    <p>{{current_context.get_context_description()}}</p>
    <h2>Step {{steps.current}}/{{steps.all.length}}</h2>
  </div>
</div>

<div ng-controller="WizardCtrl" class="container">
  <form class="form-horizontal">
    <ul class="nav nav-tabs">
      <li ng-repeat="step in steps"
        ng-class="{active: $index==getCurrentStepIndex()}">
        <a href="javascript:void(0)"
          ng-click="goToStep($index)">{{step}}</a>
      </li>
    </ul>
    <div ng-switch on="selection">

      <!-- First Step -->
      <div ng-switch-when="1">
        <div class="row">
          <div class="span6"
            ng-include="'views/submissionform.html'"
            ng-controller="FormBuilderCtrl"
            >
          </div>
          <div class="span6">
            <div class="file-upload"
              ng-include="'views/fileupload.html'">
            </div>
          </div>
        </div>
      </div>

      <!-- Second Step -->
      <div ng-switch-when="2">
        <div class="span12 receiver-list">
          <h2>Current List of receivers</h2>
          <fieldset>
            <label ng-repeat="receiver in localization.current_context.receivers">
              <input
              ng-model="receivers_selected[receiver.gus]"
              type="checkbox"
              value="{{receiver.gus}}"
              >
            {{receiver.name}} -
            {{receiver.description}} -
            {{receiver.tags}} -
            {{receiver.languages_supported}}
            {{receiver.gus}}
            </label>
          </fieldset>
          </div>

      </div>

      <!-- Third Step -->
      <div ng-switch-when="3">
        <div class="span12 receiver-list">
          <label class="text">
            Receipt Number (optional)
          </label>
          <input type="text"
            ng-model="submission.submission_receipt"
            >
          <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
          tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
          quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
          cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
          non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
          </p>
          <label class="checkbox">
            <input type="checkbox"
            name="disclaimer" value="agree"> Agree
          </label>
        </div>
      </div>

    </div>
    <div class="clearfix"></div>
    <ul class="pager pull-left">

      <li>
        <button class="btn" ng-class="{disabled: !hasPreviousStep()}" ng-click="decrementStep()">&larr; Previous Step</button>
      </li>

      <li>
        <button class="btn" ng-class="{disabled: !hasNextStep()}" ng-click="incrementStep()">Next Step &rarr;</button>
      </li>

    </ul>
    <div class="pull-right">
      <button style="margin:20px 0;" class="btn btn-success">Submit</button>
    </div>
    <div class="clearfix"></div>

  </form>
</div>

<!-- This will be visualized once the subission is created -->
<div
  class="submission-receipt modal"
  ng-show="submission_complete">
  <div class="modal-header">
    <h3>Submission Created!</h3>
  </div>
  <div class="modal-body">
    <h2>{{submission.submission_receipt}}</h2>
    <p>This number here is your receipt keep good care of it as it will
    allow you to access your submission</p>
  </div>
  <div class="modal-footer">
    <a href="#/status/{{submission.submission_receipt}}" class="btn btn-primary">View Tip</a>
  </div>
</div>
<!-- End -->


