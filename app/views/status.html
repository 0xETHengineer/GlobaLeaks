<div class="jumbotron subhead">
  <div class="container">
    <h1>Tip Status Page</h1>
  </div>
</div>
<div class="container statusPage">
  <div class="row">
    <div class="span4">
      <dl ng-repeat="(fieldName, fieldValue) in tip.fields">
        <dt>{{fieldName}}</dt>
        <dd>{{fieldValue}}</dd>
      </dl>
    </div>

    <div class="span4">
      <h3>Files</h3>
      <div class="well">
        <h4>{{file.name}}</h4>
        <ul class="unstyled">
          <li ng-repeat="file in tip.files">

            <div ng-show="whistleblower_tip_id">
              <i class="icon-book"></i> {{file.name}}
            </div>

            <div ng-hide="whistleblower_tip_id">
              <a href="{{file.href}}">
                <i class="icon-book"></i> {{file.name}}
              </a>
            </div>

            <ul class="fileDetails">
              <li ng-show='file.sha2sum != "None"'>
                <div class="input-prepend input-append">
                  <span class="add-on">SHA256</span>
                  <input class="span2" id="appendedPrependedInput" type="text" value="{{file.sha2sum}}" expand-to="500">
                </div>
              </li>
              <li ng-show='file.sha2sum == "None"'>
                <span class="label label-warning">Still calculating hash</span>
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <div ng-show="whistleblower_tip_id">
        <div  file-upload action="/tip/{{whistleblower_tip_id}}/upload"
             uploaded-files="uploadedFiles" uploading-files="uploadingFiles"></div>
      </div>

    </div>

  </div>

  <div class="row">

    <div class="span4">
      <h3>Comments</h3>
      <div ng-repeat="comment in tip.comments">
        <div ng-switch on="comment.source">

          <div ng-switch-when="whistleblower" class="alert alert-info">
            <strong>Whistleblower</strong> {{comment.content}}
          </div>

          <div ng-switch-when="receiver" class="alert alert-success">
            <strong>{{comment.author}}</strong> {{comment.content}}
          </div>

          <div ng-switch-when="system" class="alert alert-warning">
            <strong>System</strong> {{comment.content}}
          </div>

          <div ng-switch-default class="alert alert-danger">
            <strong>Malformed source</strong>
          </div>

        </div>
      </div>

      <textarea ng-model="newCommentContent"></textarea>
      <button class="btn btn-success" ng-click="newComment()">Add Comment</button>
    </div>

    <div class="span6">
      <h3>Receiver List</h3>
      <div class="table-container">
      <table class="table table-striped table-bordered dataTable" id="receiverList">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Access counter</th>
          </tr>
        </thead>
        <tbody id="receiverListBody">
          <tr ng-repeat="receiver in tip.receivers">
            <td>{{receiver.name}}</td>
            <td>{{receiver.description}}</td>
            <td>{{receiver.access_counter}}</td>
          </tr>
        </tbody>
      </table>
      </div>
    </div>

  </div>
</div>
